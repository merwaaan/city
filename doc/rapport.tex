\documentclass[10pt]{article}

\usepackage[utf8]{inputenc}
\usepackage[francais]{babel}

\usepackage[scaled]{helvet}

\usepackage{amsmath}
\everymath{\displaystyle}

\usepackage{caption}
\usepackage{subcaption}
\usepackage{float}

\usepackage[absolute]{textpos}
\TPGrid{210}{297}

\usepackage{tikz}
\usetikzlibrary{calc}

\definecolor{densitylow}{RGB}{255,220,220}
\definecolor{densitymedium}{RGB}{255,130,130}
\definecolor{densityhigh}{RGB}{255,50,50}
\definecolor{lightblue}{RGB}{27,139,243}

\newenvironment{changemargin}[2]{
  \begin{list}{}{
      \setlength{\topsep}{0pt}
      \setlength{\leftmargin}{#1}
      \setlength{\rightmargin}{#2}
      \setlength{\listparindent}{\parindent}
      \setlength{\itemindent}{\parindent}
      \setlength{\parsep}{\parskip}
    }
  \item[]}{\end{list}
}

\usepackage[natbib=true,sorting=none,style=numeric,url=false,doi=false,isbn=false]{biblatex}
%\addbibresource{references}
\bibliography{references}

\begin{document}

\begin{titlepage}

  \begin{changemargin}{-1.6cm}{-1.6cm}

    \begin{textblock}{150}(43,40)
      Stage de recherche -- Mars/Juin 2012
    \end{textblock}

    \vphantom{a}
    \vphantom{a}

    \begin{center}
      {\sffamily \huge Morphogenèse urbaine:\\ coévolution du réseau viaire et du bâti}
    \end{center}

    \vphantom{a}
    \vphantom{a}

    \begin{textblock}{145}(18,87)
      \begin{flushright}
        \textit{Auteur :}\\
        Merwan {\scshape Achibet}\\[0.5cm]
        \textit{Encadrants :}\\
        Stefan {\scshape Balev}\\
        Antoine {\scshape Dutot}\\
        Damien {\scshape Olivier}
      \end{flushright}
    \end{textblock}

    \vfill

    \begin{textblock}{150}(-30,100)
      \includegraphics[]{images/cover.png}
    \end{textblock}

  \end{changemargin}

\end{titlepage}

\begin{center}
  {\scshape\textbf Keywords}
\end{center}

{Urban system, city morphogenesis, Voronoi diagram, cellular automaton.}

\begin{center}
  {\scshape\textbf Extended abstract}
\end{center}

Gathering issues of human, economic, geographic and political nature,
the city truly is a complex system \cite{Batty2011}. The increasing
growth in population produces urban systems like the world has never
seen before, of increasing size, increasing heterogeneity and
increasing complexity. Studying the relationships between its internal
elements is fundamental to the understanding of its mechanics and to
better predict their developement. This work focuses on the
relationship between the pattern of human installations within the
city -- characterized at the atomic level by a basic subdivision, the
land lot -- and its road network.

Systematic definitions of the city are many. Through the
anthropologist's eye it can be seen as a concentration of persons, the
economist will prefer to view it as a support for the exchange of
financial and physical assets and the urbanist as a functional entity
composed of flows and services. We choose to consider that the
evolution of a city is driven by its population, translated as a
measure of its density. This goes in hand with our focus, as land lots
are inhabited by the same people that uses the surrounding roads to go
from one place to another, and because urbanistic decisions are
motivated by a need to optimize the city, to streamline transport
means and to avoid high contrasts in the urban fabric.

A survey of the domain of urban simulations shows that available
scientific works can be classified into two categories. Methods have
been proposed for visual rendering purposes; they generate visually
satisfying cities without regarding realism as an obligation. These
are often based on empirical observations and their main idea is to
emulate the street patterns found in any urban system. Scientific
modeling, on the other hand, prefers to focus on the inner qualities
of a city, often by studying a subset of those, to analyze its current
state and extrapolate its future. We orient our research with the
latter in mind but the former represents a non-negligible source of
inspiration.

A reader browsing through the literature of the field will often
encounter cellular automata. The applicability and potential
complexity of these structures has been proven many times over and
they are fit for describing any kind of space-related problem
\cite{Edwards1993}. Nevertheless, their rigorous formalism may
sometimes restrain realism and negatively impact the validity of the
model. For example, a cellular automaton topology is, by definition,
perfectly regular. Representing a city with a set of identical and
aligned cells seems like a coarse simplification. In the same way, we
may question the fact that each cell has an identical neighborhood
structure, the temporal synchronism and the state discretization. We
take a drastic step towards realism and embrace the spatial aspect of
the city by replacing the classic cellular automaton with a Voronoi
diagram following the same basic principle. Each of its cell
represents a land lot, and neighborhood relationships that are ruled
by adjacency determine its future state; the regularity constraint is
thus relaxed. Voronoi edges delineate the Voronoi space of land lots
and, as such, are ideal supports for roads.

The different elements represented in our model (\textit{i.e.} land
lots and roads) are declined in two flavors. \textit{Potential}
elements have an ethereal status; their spatial characteristics are
known but until they are effectively built, they have no direct effect
on the overall city and only represent an idea, a possible
outcome. \textit{Built} elements were potential elements that have
been constructed; they form the physical city. The gist of the model
is to add potential elements to the city and, only later, choose which
ones will be built and which ones will be forgotten. The road network
expands to accomodate the growth in density and to support anticipated
land lots. This process is divided into three separate mechanisms.

The cellular part of the model lets the inner variables of the city
vary based on the Voronoi tesselation and a set of simple rules. Here,
only population density is considered and, as a result, the
characteristic gradual patterns found in most towns are reproduced.

Whereas the previous part of the model is ensuring vertical growth,
the horizontal evolution of the city is handled by an extensible
method based on vector fields. Each piece of information that we want
to consider is represented by a vector field that will guide the
placement of new lots. For example, a field pointing away from high
density areas is used to ensure urban sprawl. Another field makes new
lots move towards the closest road such that they remain snapped to
the main transport axes. All vector fields are then summed up with
distinct factors. This general approach can model any kind of guidance
or constraint; in particular obstacle avoidance, so that the city
does not extends itself on forbidden areas like lakes, beaches or
protected forests.

The third and last mechanism chooses which of the potential elements
are to be permanently built. Potential roads are chosen with respect
to their contribution to the global network, by means of a network
flow evaluation. Potential land lots are chosen depending on their
position relative to the built roads and the date of their addition
into the potential domain.

Preliminary measurements show that virtual cities generated by this
model share several characteristics with their real-world
counterparts. For example, the average degree of crossroads accross
the road network tends to remain constant with time. Moreover, it
decreases according to the distance from high density areas. The
diameter of the network also fluctuates when densification and
extension phases occur in turn.

The main shortcoming of the model is the heavy densification occuring
in high density areas. The network flow evaluation favours edges that
relieve congestion in these parts of the city and, as a consequence,
most land lots are surrounded by roads whereas they should be grouped
into blocks.

An extension of this model would be to use the actual cadastral shapes
of the land lots as the Voronoi generators instead of a simple point
at their center. This would be another step towards realism and would
solve the heavy densification issue as roads simply could not be built
when there is not enough space between two lots.

\newpage

\tableofcontents

\newpage

\begin{center}
  {\scshape\textbf Remerciements}
\end{center}

Avant d'entrer dans le vif du sujet, j'adresse mes remerciements les
plus sincères à ceux qui ont participé, de près ou de loin, à ce
projet.

Je tiens tout particulièrement à remercier mes encadrants, Stefan
Balev, Antoine Dutot et Damien Olivier, pour leur écoute, leurs
conseils avisés et le temps qu'ils m'ont accordé.

Many thanks go to Florent for his thorough examination of my extended
abstract. No more passive forms, I swear!

Ce stage de recherche n'aurait pas été si agréable sans mes camarades
de travail. Merci à Alexis pour ses facéties -- je te pardonne d'avoir
bloqué mes plate-formes offshore. Merci à Florent pour son voisinage
toujours aussi agréable -- je prends bien soin de Link, la boîte verte
à moustaches. Merci à Guillaume pour son énergie. Merci à Thibaut pour
nos discussions d'ordre cinématographique, même si nous ne sommes pas
toujours d'accord à ce sujet !

Enfin, un grand merci va à Christelle et Maureen pour leur relecture
minutieuse.

\newpage

\section{Introduction}

L'exode des zones rurales vers les communautés urbaines a atteint un
pic de croissance durant les années 50 et demeure depuis constant. En
2007, la moitié de la population mondiale habitait en ville et des
projections récentes annoncent que cette part atteindra environ 80\%
d'ici 2050. En conséquence de cette explosion démographique des zones
urbaines, un réel besoin de contrôler et de prévoir l'évolution de la
ville se fait ressentir. C'est dans ce cadre de contrôle et de
prévision qu'il est nécéssaire d'étudier ses mécanismes sous-jacents
pour pouvoir les reproduire sous forme de simulations et étudier
différents scénarios possibles.

L'urbanisation massive et la croissance des villes ne sont pas des
phénomènes récents et ont été étudiés à maintes reprises par les
urbanistes et les géographes. Parmi les nombreuses problématiques
inhérentes aux villes, on en met en avant deux : celle du placement de
la population et celle du déplacement de la population. Plusieurs
modèles informatiques simulent de façon satisfaisante la morphogenèse
urbaine; ils restent cependant très spécialisés. Certains sont axés
sur l'évolution des densités tandis que d'autres se concentrent sur
l'expansion des réseaux de transport. Plus rares sont les modèles
considérant simultanément ces deux domaines. Quand bien même ces
éléments sont gérés de concert, un autre problème subsiste : le manque
de cohérence temporelle. En effet, de nombreux modèles fournissent des
configurations urbaines finales convaincantes mais le cycle de
construction employé ne reflète pas la réalité de la croissance
urbaine. Ainsi, stopper une telle simulation en pleine éxécution nous
octroie une ville incomplète et erronée (bâtiments isolés du réseau de
transport, réseau non connexe). Idéalement, si toutes les itérations
étaient mises bout à bout, le \textit{film} produit décrirait la
croissance naturelle de la ville.

On se concentre donc ici sur deux éléments majeurs du tissu urbain, le
\textit{viaire} et le \textit{bâti}, afin d'étudier leur relation de
coévolution. Le bâti est représenté à l'échelle de la parcelle
cadastrale par un automate cellulaire. Nous relaxons néanmoins ses
contraintes d'homogénéité et de régularité spatiale pour aller dans le
sens du réalisme. Le modèle d'évolution proposé garantira la cohérence
temporelle.

La première partie présente un état de l'art de la modélisation de
systèmes urbains et se concentre particulièrement sur les méthodes à
base d'automates cellulaires afin de mettre en évidence leurs qualités
mais aussi les limitations qu'ils imposent. La structure de données et
les mécanismes régissant le modèle conçu dans le cadre de ce stage de
recherche sont ensuite présentés en seconde partie. Enfin, un exemple
d'application est présenté et analysé pour tester et valider ce
travail dans la troisième partie.

\section{\'Etat de l'art}

\subsection{Automates cellulaires et simulation urbaine}

La modélisation de systèmes complexes est longtemps uniquement passée
par l'usage de méthodes mathématiques; typiquement, des systèmes
d'équations différentielles. Ces techniques permettent de décrire des
lois d'évolution et d'observer, ainsi que de prédire par
extrapolation, le comportement de phénomènes du réel. Dans le cas de
modèles prenant en compte un vaste jeu de paramètres, cette approche
peut néanmoins se révéler délicate à employer. Plus intrinsèquement,
même si une telle modélisation est basée sur des observations ancrées
dans la réalité, il s'agit d'une représentation conceptuelle d'un
problème et aucune mimique des mécaniques sous-jacentes ne s'opère.

Historiquement, les prémices de l'informatique moderne et d'un tout
autre paradigme de modélisation sont à attribuer aux esprits du milieu
du vingtième siècle. Alan Turing introduit en 1936 la machine éponyme
qui, bien que purement théorique, possède un module de contrôle ainsi
qu'une mémoire et peut donc exécuter une infinité d'algorithmes. Cette
démarche se démarque de l'approche mathématique et semble plus
humaine; on ne résout pas un problème en utilisant des fonctions
associant une quantité à un résultat mais on agit véritablement sur
ses données. L'idée de base de Turing était d'ailleurs d'assimiler le
fonctionnement de sa machine au travail d'une personne remplissant les
cases d'un tableau infini.

Entraîné par cette mouvance procédurale et en réaction aux réseaux de
neurones de McCulloch et Pitts, John von Neumann et Stanislaw Ulam
joignent leurs travaux durant les années 40 pour concevoir l'automate
cellulaire : un système comprenant un ensemble d'automates à états
spatialement localisés (typiquement sous forme de grille) et
interconnectés en fonction de leur proximité. Les entrées de chaque
automate correspondent alors aux états des automates voisins et de
cette organisation se dégagent de fortes relations
d'interdépendance. Le jeu de la vie de Conway en est un exemple
classique. La simplicité de ses règles, mise en contraste avec la
variété des configurations engendrées, témoigne de la richesse des
automates cellulaires \cite{Gardner1970}.

Les automates cellulaires ont depuis été extensivement étudiés et sont
appliqués à l'étude de nombreux phénomènes biologiques, physiques et
sociaux \cite{Ganguly2003}. La motivation d'Ulam lors de leur
conception était d'ailleurs de modéliser la croissance de cristaux. On
peut aussi citer en exemple la simulation de la dynamique de fluides
\cite{Frisch1986} et de la croissance de tumeurs
\cite{Kansal2000}. Leur caractère spatial laisse supposer qu'ils sont
particulièrement adaptés aux applications géographiques et, dans le
cadre de notre problématique, urbaines. Ils ne fûrent paradoxalement
pas immédiatement exploités à cet effet et c'est seulement suite à un
article de Waldo Tobler, en 1975, que le rapprochement entre les
automates cellulaires et le domaine de la géographie apparaît
clairement \cite{Tobler1975}. Sont ensuite publiés des travaux majeurs
appliquant l'automate cellulaire à des problématiques géographiques
multi-échelles telles que l'évolution d'épidémies \cite{Fu2003} et la
ségrégation de population \cite{Schelling1969} (voir le modèle de
Schelling sur la figure \ref{fig:schelling}) et bien sûr la croissance
urbaine \cite{Batty1997,Stevens2007}.

\begin{figure}[H]
  \centering
  \includegraphics[width=.5\linewidth]{images/schelling.png}
  \caption{Configuration produite par le modèle de Schelling. Chacune
    des deux couleurs représente une population différente. La
    conclusion de ces travaux est qu'un faible degré d'intolérance
    entre deux populations suffit à les séparer de manière évidente.}
  \label{fig:schelling}
\end{figure}

Une idée très exploitée dans ce domaine est d'associer un potentiel de
transition à chaque cellule et ce, vers tous les états qu'elles
peuvent adopter \cite{Benenson2004}. Dans les modèles déterministes,
la transition vers l'état à plus haut potentiel est appliquée tandis
que dans les modèles stochastiques, un tirage aléatoire biaisé est
préféré. Le potentiel d'une cellule à passer à un nouvel état est
déterminé en fonction de paramètres propres au modèle. Peuvent être
pris en compte l'élévation du terrain, la densité de population, la
proximité d'axes routiers, la proximité de centres urbains, l'âge des
parcelle, leur valeur; en fait, toute combinaison d'attributs relatifs
à un réseau urbain. Par exemple, dans une simulation représentant les
différents types d'usage, le passage d'une cellule à l'état
\textit{résidentiel} pourrait dépendre de la proximité des commerces
et des routes et de l'éloignement des zones industrielles. Bien sûr,
un nombre élevé de paramètres à prendre en compte requiert un couplage
fin et l'impact de chaque variable peut être pondéré. Puisque les
variations individuelles de paramètres n'émergent pas de manière
transparente à la surface de la simulation, les modèles urbains basés
sur des automates cellulaires doivent être finement calibrés et leur
réalisme est un défi en soi. Pour contourner ce problème, Yeh et Li
prônent l'usage d'un réseau de neurones pour pondérer chaque paramètre
à partir de l'analyse de données cartographiques historiques
\cite{Yeh2002}.

Il est important de noter que la simplicité du formalisme enveloppant
un automate cellulaire strict s'oppose à la fidélité de la simulation,
notamment dans le cadre de modèles spécifiques
\cite{Torrens2000,Torrens2001}. Dans ce cas, une prise de liberté
quant au formalisme originel est autorisée, voire nécessaire, pour
obtenir des résultats satisfaisants \cite{White1998}.

La première limite que le formalisme cellulaire de base impose est la
discrétisation des états que chaque cellule peut adopter. Même si
cette caractéristique fait partie intégrante des particularités qui
confèrent aux automates cellulaires leur simplicité d'usage et
d'analyse, la description de quantités pouvant arborer un éventail
infini de valeurs est alors impossible. Plus concrètement, il est aisé
de catégoriser les cellules d'un espace selon le fait, par exemple,
qu'elles contiennent des installations humaines ou non (état booléen)
\cite{Benguigui2004,Cornu2008} ou de façon plus sophistiquée, en
fonction de leur type d'usage (\textit{résidentiel},
\textit{commercial}, \textit{industriel} \cite{Lechner} et plus
\cite{Dubos-Paillard2003}). Représenter des quantités réelles et des
variations continues l'est moins. Pour symboliser plus finement la
densité au c\oe ur d'un ensemble urbain, Semboloni utilise par exemple
un automate cellulaire de dimension trois dans lequel plus une pile de
cellules actives est haute, plus la zone représentée est peuplée
\cite{Semboloni2000}. Plus généralement, il est accepté de représenter
l'état d'une cellule par un vecteur contenant des valeurs réelles; des
règles de transitions adaptées et mesurées sont alors à mettre en
place.

L'homogénéité d'un automate cellulaire fait partie intégrante de sa
définition originelle : en mettant de côté l'état qu'elles adoptent,
toutes les cellules sont identiques en forme et en structure de
voisinage. Dans le cadre de notre problématique, cette approche est
limitante car, dans une ville, les parcelles ne sont
qu'occasionnellement identiques et alignées. Similairement, la notion
de voisinage est clairement à redéfinir. Classiquement, les voisinages
de von Neumann et de Moore sont utilisés mais la relation par
contiguité qu'ils décrivent ne convient pas à la représentation des
liens de dépendance à plus grande échelle se développant dans un
système urbain. Le positionnement d'un bâtiment résidentiel dans une
ville se base évidemment sur le voisinage direct des zones envisagées
(on préfère construire une maison dans un quartier résidentiel) mais
il faut aussi prendre en compte les alentours plus distants (la
centrale thermique se trouvant à 500 mètres du site peut poser
problème). Une solution possible est d'étendre les aires des
voisinages de von Neumann et de Moore tout en conservant leur forme
caractéristique. La symétrie évidente se dégageant de telles
simplifications va à l'encontre de la retranscription des relations
prenant place au sein d'une ville. O'Sullivan a choisi de relaxer
cette contrainte de partitionnement spatial régulier pour faire un pas
dans la direction du réalisme en proposant l'automate cellulaire
graphe \cite{O'Sullivan2000,O'Sullivan2001}. Conventionnellement, une
cellule d'automate correspond à un sous-espace urbain ou bien une
parcelle cadastrale mais dans chacun de ces cas le modèle se base
évidemment sur une simplification grossière de l'espace étudié. Il
décide donc de donner à chaque cellule les mêmes qualités topologiques
que les parcelles qu'elles représentent : même formes, même
dimensions, mêmes coordonnées. Une variété de relations de voisinage
sont alors envisageables (par voisinage au sens urbain, par distance
dans un rayon d'influence, par critère de visibilité). L'éloignement
du formalisme cellulaire est drastique car la structure perd de son
homogénéité puisque chaque cellule est différente et chaque voisinage
est unique. Il faut aussi noter que la couverture de l'espace n'est
plus complète car des vides entre les cellules apparaissent. Chacune
de ces concessions est mise au service du réalisme de la
simulation. Un exemple de sous-espace urbain représenté par ce modèle
est visible sur la figure \ref{fig:sullivan}.

\begin{figure}[H]
  \centering
  \includegraphics[width=.7\linewidth]{images/gca.png}
  \caption{Hoxton, un quartier de Londres, modélisé par l'automate
    cellulaire graphe de David O'Sullivan \cite{O'Sullivan2000}.}
  \label{fig:sullivan}
\end{figure}

Une prise de liberté quant à l'aspect temporel est aussi
envisageable. Un automate cellulaire strict est synchrone,
\textit{i.e.} les changements d'état de toutes les cellules
s'effectuent simultanément. Si le choix était fait de mettre à jour
chaque état de façon asynchrone, le comportement de l'automate en
serait lourdement modifié. Par exemple, les qualités auto-réplicatives
de certaines entités du jeu de la vie ne seraient pas garanties. Il
est pourtant légitime de se questionner sur la validité d'un tel choix
dans une simulation urbaine; premièrement parce qu'une ville est un
système complexe et désordonné, ensuite parce que les processus qui
s'y déroulent sont réglés sur différentes échelles temporelles.

Bien que les automates cellulaires soient couramment utilisés pour
simuler le trafic routier (dans leur version 1D ou 2D
\cite{Queloz1996}), ils s'accordent peu avec la construction même d'un
réseau viaire. Dans les simulations cellulaires urbaines, le
positionnement des routes a un impact sur le développement des
cellules puisque le viaire \textit{attire} le bâti mais le réseau est
souvent fourni en entrée et reste statique. Nous sommes amenés à nous
interroger sur la capacité des automates cellulaires à modéliser le
développement routier car la cellule n'est pas une représentation
adéquate pour une structure linéaire dont l'échelle est plus large que
celle de la parcelle.

\subsection{Approches alternatives}

Les automates cellulaires ne sont pas l'unique moyen de modéliser la
croissance urbaine. Plusieurs simulations existantes sont des systèmes
multi-agents \cite{Lechner2003,Lechner2004}. Dans ces cas, un agent est
assimilé à un promoteur immobilier et peut acheter des terres, les
vendre, les développer ou changer leur type. Les actions qu'il
entreprend sont évaluées en fonction de l'impact sur la ville
(changement de la valeur immobilière, avis de la population) et des
réglementations locales afin d'éviter toute configuration illégale.
Pour la construction du réseau routier, une solution est de mettre en
place, en plus des agents promoteurs, deux types d'agent
traceur. Les \textit{extenders} parcourent toute la surface du
terrain à la recherche de bâtiments isolés et éloignés puis tracent
une nouvelle route jusqu'au réseau urbain. Les \textit{connectors} se
déplacent uniquement sur le réseau viaire et y raccordent les
bâtiments non connectés se trouvant dans leur rayon de détection
\cite{Lechner2003}. Cette approche introduit un défaut conceptuel : le
réseau viaire est construit après le bâti et non l'inverse. Ainsi,
des bâtiments peuvent rester isolés pendant plusieurs itérations de la
simulation et, même si le résultat final apparaît comme satisfaisant,
arrêter la simulation en cours de l'évolution du système produit une
configuration erronée. Autrement dit, l'évolution n'est pas
historiquement cohérente et seule la ville finale est correcte.

Un autre modèle gérant à la fois l'évolution du réseau viaire et du
bâti est présenté par Weber \cite{Weber2009}. Le principe est le
suivant : à chaque agrandissement du réseau urbain, on crée plusieurs
routes éphémères en suivant des règles géométriques précises
(allongement des voies existantes, limitation du degré des carrefours
à 4, l'angle entre chaque rue tend vers 90 degrés). Parmi les $n$
routes générées, une seule sera conservée. Pour la choisir, le trafic
sur ces nouvelles routes est simulé par des agents piétons et
véhicules et l'on identifie celle qui sera la plus globalement
bénéfique au réseau.

Barthelemy et Flammini \cite{Barthelemy2009} proposent aussi un modèle
dans lequel le viaire et le bâti évoluent simultanément. Le bâti,
représenté par une mesure de densité sur des points disposés
régulièrement dans l'espace, croît linéairement en fonction du temps
et le réseau routier s'agrandit en suivant des règles empiriques
\cite{Barthelemy2008}. Pour raccorder au réseau viaire des points de
densité se trouvant à proximité d'une route, cette dernière est
allongée de façon à tous les desservir et passe à distance égale de
chacun d'eux (figure \ref{fig:barthelemy}). Il est intéressant de
noter que, sans le mentionner, les auteurs construisent ainsi un
diagramme de Voronoï comme celui qui est à la base de notre modèle,
mais partiel.

\begin{figure}[H]
  \centering
  \includegraphics[width=.4\linewidth]{images/barthelemy-road.png}
  \caption{Pour desservir à la fois le point $A$ et le point $B$, la
    route va s'allonger dans la direction $\vec{M'}$
    \cite{Barthelemy2008,Barthelemy2009}.}
  \label{fig:barthelemy}
\end{figure}

D'autres solutions s'éloignant des systèmes complexes et penchant du
côté de la génération procédurale de contenu existent
\cite{Kelly2006}. Souvent, le domaine d'application de telles méthodes
est l'infographie, le cinéma et le jeu vidéo. L'objectif est alors de
construire de manière automatique une ville visuellement réaliste sans
se soucier de son caractère fonctionnel. Usuellement, l'organisation
parcellaire dépend entièrement du réseau routier car la première étape
est souvent de générer un réseau viaire complet puis de placer le bâti
en subdivisant récursivement les niches vides formées par les
voies. Dans Citygen \cite{Kelly2006b}, un point $p$ de l'espace est
aléatoirement choisi puis on calcule un ensemble de plusieurs routes
raccordant $p$ au réseau routier existant en faisant varier leur
déviation angulaire et un paramètre de bruit; la route finale est
celle, parmi cet échantillonage, dont la variation d'altitude est la
plus faible. CityEngine \cite{Parish2001} utilise un L-System dont les
règles permettent de reproduire les différents motifs quadrillés,
radiaux et organiques que l'on retrouve dans une ville. La nature
récursive des L-Systems permet à ces motifs de se combiner et
d'apparaître à différents niveaux de profondeur (voir figure
\ref{fig:cityengine}). Dans une autre simulation, le tracé des routes
suit les \textit{hyperstreamlines} \cite{Chen2008} formées par un
champ de vecteurs. Ce champ est calculé par combinaison de plusieurs
autres champs de vecteurs, chacun représentant des contraintes
directionnelles particulières telles que les zones interdites,
l'altitude et les directives données par l'utilisateur. Ces techniques
sont intrinsèquement géométriques, et comme précisé plus haut, le
résultat est purement visuel; elles représentent néanmoins une source
d'inspiration à ne pas négliger.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/cityengine.png}
  \caption{CityEngine mélange des motifs urbains extraits de cartes de
    Paris et de New York \cite{Parish2001}.}
  \label{fig:cityengine}
\end{figure}

\section{Le modèle}

\subsection{Structure}

Les automates cellulaires sont des structures versatiles et puissantes
dont le formalisme originel impose néanmoins quelques limitations;
l'une des principales étant, à nos yeux, un maillage régulier et
statique. Pour répondre à notre problématique, il est nécessaire
d'employer une structure respectant les critères suivants :

\begin{enumerate}
\item{Elle doit partitionner l'espace, possiblement de façon
  irrégulière;}
\item{Des relations de voisinages pourront être déduites de sa
  topologie;}
\item{Elle doit pouvoir représenter à la fois la parcellisation du
  territoire et le réseau routier.}
\end{enumerate}

le diagramme de Voronoï est le candidat idéal. Soit un ensemble $G$ de
$n$ points distincts nommés \textit{générateurs} (ou
\textit{sites}). Alors $V(g)$ est la subdivision de l'espace contenant
tous les points plus proches du générateur $g$ que de tout autre
générateur \cite{Edwards1993}. Autrement exprimé, pour tout point $p
\in V(g)$ et pour tout générateur $h \in G$ différent de g, $d(p,g) <
d(p,h)$. $V(g)$ est appelé une cellule de Voronoï. L'ensemble des
cellules forme le diagramme de Voronoï.

La figure \ref{fig:voronoi} fournit un exemple de diagramme de
Voronoï. On remarque visuellement quelques propriétés notables;
notamment le fait que deux générateurs voisins sont équidistants de
l'arête les séparant et que le segment les reliant y est
perpendiculaire.

\begin{figure}[!ht]
  \centering
  \includegraphics[width=0.7\linewidth]{images/voronoi.png}
  \caption{Un diagramme de Voronoï. Chaque point noir est un générateur.}
  \label{fig:voronoi}
\end{figure}

Les diagrammes de Voronoï trouvent de nombreuses applications en
science. En robotique, les obstacles présents dans un environnement
peuvent être assimilés à des générateurs et un robot cherchant à
maximiser leur évitement préférera longer les frontières des cellules
(les arêtes de Voronoï) \cite{Garrido2006}. En sociologie
géographique, ils permettent d'opposer les zones d'influence de
différents éléments urbains et répondent à des questions telles que :
quel magasin un piéton sera-t-il plus susceptible de visiter selon la
zone dans laquelle il se trouve ? Leur utilisation pour l'étude de
l'épidémie de choléra londonienne en 1854 a permis de vérifier le lien
entre fontaines publiques infectées (les générateurs) et zones
souffrant d'un fort taux de mortalité (les cellules)
\cite{Thomas2010}.

Comme son homonymie le laisse présager, la cellule de Voronoï remplace
dans notre modèle la cellule de l'automate cellulaire. Une grille
régulière, comme celles présentes dans les automates cellulaires
classiques, correspond d'ailleurs à un diagramme de Voronoï dans
lequel les générateurs sont régulièrement disposés. Une tesselation de
Voronoï peut être considérée comme une généralisation de la structure
grillagée et notre première contrainte est satisfaite.

À l'échelle de ce modèle, chaque cellule représente une parcelle
cadastrale et on utilise comme générateur le centre de l'empreinte de
la parcelle. Le diagramme permet d'identifier les parcelles voisines
comme étant celles partageant une arête de Voronoï. Un graphe de
voisinage est ainsi construit et adopte la forme duale du diagramme de
Voronoï : la triangulation de Delaunay (voir figure
\ref{fig:delaunay}). Les structures de voisinage de chaque cellule
sont déterminées à partir de la topologie du diagramme et la seconde
contrainte est satisfaite.

\begin{figure}[!ht]
  \centering
  \includegraphics[width=.7\linewidth]{images/delaunay.png}
  \caption{Le réseau de voisinage des parcelles représentées par un
    diagramme de Voronoï (en noir) correspond à sa forme duale, la
    triangulation de Delaunay (en bleu).}
  \label{fig:delaunay}
\end{figure}

Le diagramme de Voronoï permet de décrire un canevas urbain de base
dans lequel l'espace d'influence de chaque parcelle est décrit mais la
composante routière reste encore absente du modèle. Chaque arête de
Voronoï indique un espace entre deux parcelles et est donc susceptible
d'accueillir une route. Bien sûr, dans une véritable ville, chaque
parcelle n'est pas encerclée de voies; l'un des objectifs du modèle
est de déterminer quelles arêtes accueilleront des routes et quelles
arêtes resteront vides. Cette structure suffit donc à représenter à la
fois les éléments du viaire et du bâti. Notre dernière contrainte est
comblée.

En pratique, dans notre modèle un système urbain est représenté par
deux graphes : le graphe viaire et la graphe de voisinage du bâti. Le
graphe du bâti a pour n\oe uds les centres des parcelles et ses arêtes
symbolisent les relations de voisinage. Le graphe viaire a des arêtes
représentant les routes et des n\oe uds représentant les
carrefours. Les structures de ces graphes sont basées sur la topologie
du diagramme de Voronoï puisqu'il s'agit pour le graphe viaire de
l'ensemble des arêtes et sommets de Voronoï et pour le graphe du bâti,
des arêtes et sommets sa triangulation de Delaunay.

Il est essentiel de dissocier le polygone convexe qu'est la cellule de
Voronoï et la véritable empreinte cadastrale de la parcelle qu'elle
répresente. Une cellule représente l'influence d'une parcelle dans
l'espace urbain et possède comme seul point commun avec l'empreinte
son centre puisqu'il s'agit du générateur de la
cellule. Similairement, une arête peut indiquer qu'une voie passe
entre deux parcelles sans pour autant fournir ses coordonnées ou sa
courbure. Si l'on souhaite, dans un but infographique, générer une
image de notre ville à partir de ce modèle, un travail
d'interprétation est nécessaire et n'a pas été traité à l'occasion de
ce projet. Un exemple est visible sur la figure \ref{fig:interp}.

\begin{figure}[H]
  \centering
  \subcaptionbox{}[0.9\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/voronoi-interp0.png}
  }

  \subcaptionbox{}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/voronoi-interp1.png}
  }
  \subcaptionbox{}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/voronoi-interp2.png}
  }
  \subcaptionbox{}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/voronoi-interp3.png}
  }
  \caption{Un diagramme de Voronoï trivial et trois interprétations possibles.}
  \label{fig:interp}
\end{figure}

\subsection{Potentialité}

Via le terme \textit{potentialité}, on souhaite exprimer l'opposition
entre deux types d'éléments : les \textit{potentiels} et les
\textit{construits}.

Un élément \textit{construit} est une parcelle ou une voie dont
l'existence physique est avérée et qui affecte activement ses
alentours. L'ensemble des éléments construits forme la ville.

Un élément \textit{potentiel} peut être assimilé à une idée germant
dans l'esprit de l'urbaniste; à une possibilité envisagée et
représentée de manière intangible mais néanmoins précise. Les
parcelles potentielles, particulièrement, n'ont pas d'effet sur le
bâti construit. Par contre, elles attirent la construction des routes.

Un sous-espace urbain décrit par notre modèle est visible sur la
figure \ref{fig:potential}\subref{fig:potential-interp}. On remarque
que chaque parcelle (construite ou potentielle) est entourée de routes
(elles aussi construites ou potentielles). La figure
\ref{fig:potential}\subref{fig:potential-voronoi} est la
représentation de ce même espace par un diagramme de Voronoï.

\begin{figure}[H]
  \centering
  \subcaptionbox{\label{fig:potential-interp}}[.45\linewidth][c]{
    \includegraphics[width=.45\linewidth]{images/potential-interp.png}
  }
  \subcaptionbox{\label{fig:potential-voronoi}}[.45\linewidth][c]{
    \includegraphics[width=.45\linewidth]{images/potential-voronoi.png}
  }
  \caption{Un sous-espace urbain et sa représentation sous forme de
    diagramme de Voronoï. La parcelle potentielle et les routes
    potentielles sont tracées en pointillés.}
  \label{fig:potential}
\end{figure}

La dualité introduite par la potentialité est justifiée par un désir
de fournir un modèle historiquement cohérent. On ne se contente pas de
générer itérativement un système urbain complet et de considérer la
configuration finale comme l'unique résultat. Chaque itération fournit
un résultat en soi et assembler les instantanés de la ville doit
décrire sa croissance naturelle. Le cycle d'urbanisation réel se
produisant dans les villes doit donc être reproduit. On voit sur la
figure \ref{fig:order-bad} quelques étapes pouvant mener à la
construction d'une nouvelle parcelle. Mais même si les configurations
de départ et d'arrivée sont correctes, les étapes intermédiaires sont
erronées. À l'étape 2, la parcelle potentielle est construite alors
qu'elle n'est pas reliée à une route. À l'étape 3, une route y est
construite mais elle n'est pas encore reliée au reste du réseau.

\begin{figure}[H]
  \centering
  \subcaptionbox{Étape 1}[.24\linewidth][c]{
    \includegraphics[width=.24\linewidth]{images/order_bad_0.png}
  }
  \subcaptionbox{Étape 2}[.24\linewidth][c]{
    \includegraphics[width=.24\linewidth]{images/order_bad_1.png}
  }
  \subcaptionbox{Étape 3}[.24\linewidth][c]{
    \includegraphics[width=.24\linewidth]{images/order_bad_2.png}
  }
  \subcaptionbox{Étape 4}[.24\linewidth][c]{
    \includegraphics[width=.24\linewidth]{images/order_bad_3.png}
  }
  \caption{Construction d'une parcelle dans un ordre non naturel.}
  \label{fig:order-bad}
\end{figure}

La question de l'ordonnancement des étapes de la morphogenèse urbaine
se pose donc. L'implantation de nouveaux bâtiments est lourdement
dépendante du réseau routier existant puisqu'on ne construit pas
d'infrastructures isolées des axes de transport. \`A l'inverse, le
développement du réseau viaire est dépendant du bâti puisque la
fonction des routes est avant tout de le desservir. En partant de ce
constat, nous sommes face à un problème dans lequel chaque domaine
traîté est dépendant de l'autre. Donc, faut-il construire la bâti puis
le relier au réseau viaire ? Faut-il installer les routes puis les
peupler par du bâti ?  L'\oe uf ou la poule ?

\begin{figure}[H]
  \centering
  \input{images/bati-viaire.tikz}
  \caption{Le viaire dépend du bâti et le bâti dépend du viaire. Par
    où commencer ?}
  \label{fig:bati-viaire}
\end{figure}

Lors de la croissance des villes, le cyle d'urbanisation se déroulant
est le suivant :

\begin{enumerate}
\item{Une nouvelle installation est prévue en bordure de la ville,
  dans une zone possiblement isolée du réseau routier;}
\item{Une route est construite pour permettre l'installation de la
  nouvelle parcelle;}
\item{Une fois la route contruite, la parcelle prévue peut être à son tour construite.}
\end{enumerate}

Dans notre modèle, ces quelques étapes se traduisent comme suit :

\begin{enumerate}
\item{Une parcelle potentielle est placée dans une zone vide
  accompagnée de routes potentielles l'entourant;}
\item{On construit progressivement des routes potentielles menant à la
  parcelle potentielle;}
\item{Une fois la route contruite, la parcelle peut être à son tour
  construite;}
\end{enumerate}

La figure \ref{fig:order-good} illustre cet ordonnancement.

\begin{figure}[H]
  \centering
  \subcaptionbox{Étape 1}[.24\linewidth][c]{
    \includegraphics[width=.24\linewidth]{images/order_good_0.png}
  }
  \subcaptionbox{Étape 2}[.24\linewidth][c]{
    \includegraphics[width=.24\linewidth]{images/order_good_1.png}
  }
  \subcaptionbox{Étape 3}[.24\linewidth][c]{
    \includegraphics[width=.24\linewidth]{images/order_good_2.png}
  }
  \subcaptionbox{Étape 4}[.24\linewidth][c]{
    \includegraphics[width=.24\linewidth]{images/order_good_3.png}
  }
  \caption{Construction d'une parcelle dans un ordre naturel.}
  \label{fig:order-good}
\end{figure}

\subsection{Mécanismes}

\subsubsection{Automate cellulaire graphe}

La dynamique de croissance urbaine est décomposable sur deux axes. La
croissance horizontale décrit l'expansion spatiale de la ville dont
l'enveloppe grandit pour occuper plus de territoire tandis que la
croissance verticale correspond à l'augmentation des densités en son
sein, souvent à partir d'un ou de plusieurs centres. Le mécanisme
cellulaire présenté ci-après émule la croissance verticale et les
variations de densité internes au système.

La densité de population est la quantité principale guidant
l'évolution de ce modèle. La ville évolue, de nouveaux bâtiments
apparaissent, d'autres sont rasés, les quartiers changent. Le modèle
doit être capable de simuler ces évolutions. C'est bien sûr avec le
principe des automates cellulaires en tête que nous allons gérer cette
dynamique.

On discrétise la densité sur trois paliers : \textit{faible} ($f$),
\textit{moyenne} ($m$) et \textit{élevée} ($e$). La matrice $A$ décrit
des coefficients d'affinité mettant en relation les différentes
classes de densité.

\begin{equation}
A =
\bordermatrix{
    & f & m & e \cr
  f & 1 & 0.01 & 0 \cr
  m & 0.001 & 1.5 & 0.01 \cr
  e & 0 & 0.01 & 1.6
}
\end{equation}

Une valeur haute en $A_{ee}$ signifie par exemple que si une cellule a
de nombreux voisins de densité \textit{élevée} alors elle a une grande
probabilité de devenir elle-même \textit{élevée}. L'équation
\ref{eq:transition} permet de formaliser ce principe et fournit un
score $Ti(C)$ quantifiant l'éventualité pour une cellule $C$ de passer
à l'état $i$. $V_k(C)$ correspond au nombre de voisins de $C$ ayant
l'état $k$.

\begin{equation}
T_i(C) = \sum_{k \in \{f,m,e\}} V_k(C) A_{ik}
\label{eq:transition}
\end{equation}

Pour obtenir la probabilité $P_i(C)$ de passage à l'état $i$, on
normalise chaque score de transition (équation \ref{eq:normalisation})
et une roue de la fortune biaisée se charge du choix.

\begin{equation}
P_i(C) = \frac{T_i(C)}{\sum_{k \in \{f,m,e\}} T_k(C)}
\label{eq:normalisation}
\end{equation}

Les valeurs fortes présentes sur la diagonale de la matrice $A$
permettent à des groupements de parcelles partageant la même densité
de se former. Les valeurs hors de la diagonale sont moindres afin de
favoriser la stabilité de ces groupes mais reste supérieures à 0 pour
laisser de la place au hasard. Dans la plupart des villes, les données
cadastrales indiquent que les densités faibles occupent la majorité de
la superficie suivies des densités moyennes puis des densités
élevées. Pour contrebalancer cette inégalité et éviter que les
densités fortes ne soient \textit{englouties} par la quantité de
densités faibles, $A_{ff} < A_{mm} < A_{ee}$. Ces paramètres sont bien
évidemment réglables selon le type de système urbain considéré.

Prenons un exemple trivial pour illustrer ce processus. On souhaite
évaluer l'état que pourrait prendre la cellule $C$, au centre du
quadrillage de la figure \ref{fig:ca-example}, à la prochaine mise à
jour du système. Chacune des cellules en bordure de cette figure est
voisine de $C$ selon le voisinage de Moore. On commence par calculer
les scores de transition.

\begin{figure}[!ht]
  \centering
  \input{images/ca-example.tikz}
  \caption{On cherche à calculer les probabilités transitionnelles
    pour la cellule centrale, $C$. Les couleurs vives indiquent de
    haute densités.0}
  \label{fig:ca-example}
\end{figure}

\begin{align*}
T_f(C) &= V_f(C) A_{ff} + V_m(C) A_{fm} + V_e(C) A_{fe} \\
       &= 1 \times 1 + 3 \times 0.01 + 4 \times 0 \\
       &= 1.03
\end{align*}

\begin{align*}
T_m(C) &= V_f(C) A_{mf} + V_m(C) A_{mm} + V_e(C) A_{me} \\
       &= 1 \times 0.001 + 3 \times 1.5 + 4 \times 0.01 \\
       &= 4.541
\end{align*}

\begin{align*}
T_e(C) &= V_f(C) A_{ef} + V_m(C) A_{em} + V_e(C) A_{ee} \\
       &= 1 \times 0 + 3 \times 0.01 + 4 \times 1.6 \\
       &= 6.7
\end{align*}

On normalise ensuite les scores afin de sélectionner aléatoirement --
mais de façon biaisée -- le prochain état de $C$. Ici, on observe que
la cellule a de fortes chances de passer à la densité \textit{élevée}.

\begin{equation*}
P_f(C) = \frac{T_f(C)}{\sum_{k \in \{f,m,e\}} T_k(C)} = \frac{1.03}{1.03 + 4.541 + 6.7} = 0.084
\end{equation*}

\begin{equation*}
P_m(C) = \frac{T_m(C)}{\sum_{k \in \{f,m,e\}} T_k(C)} = \frac{4.541}{1.03 + 4.541 + 6.7} = 0.37
\end{equation*}

\begin{equation*}
P_e(C) = \frac{T_e(C)}{\sum_{k \in \{f,m,e\}} T_k(C)} = \frac{6.7}{1.03 + 4.541 + 6.7} = 0.546
\end{equation*}

Ce processus basé sur les affinités entre différentes classes évoque
le modèle de ségrégation de Schelling à la différence qu'ici, trois
\textit{populations} interagissent et qu'il n'y a pas de contrainte de
déménagement (dans son modèle, si une cellule passe de $A$ à $B$ alors
une autre doit passer de $B$ à $A$ ailleurs afin de conserver les
mêmes quantités de chaque classe).

Si l'on applique cette règle à un automate cellulaire classique plus
large, on obtient les configurations visibles sur la figure
\ref{fig:ac}. Les dégradés de densités caractéristiques des systèmes
urbains apparaissent. On remarque deux incohérences séparant le
système urbain simulé et une vraie ville. Premièrement, l'état de
l'automate change drastiquement en juste quelques itérations : au
temps 25, la disposition de départ n'est déjà plus discernable. Hors,
la granularité temporelle d'une telle simulation doit être fine afin
de laisser chaque modification locale du système se répercuter sur le
reste de l'automate. Deuxièmement, on observe d'itération en itération
que chaque cellule voit son état changer en permanence -- ce qui est
attendu d'un automate cellulaire auquel on n'a pas adjoint de règle
supplémentaire. Il est donc important d'associer à chaque cellule un
élan favorisant la persistance de son état selon son âge afin de
ralentir la simulation et surtout d'éviter les transitions constantes
qui ne sont absolument pas fidèles à la stabilité d'une ville
réelle. Les fonctions sigmoïdes, fréquemment employées en modélisation
de systèmes complexes, sont idéales pour exprimer en fonction du temps
le pasage d'un seuil à un autre. La sigmoïde classique (figure
\ref{fig:sigmoide1}) varie de 0 à 1 par une courbe caractéristique. On
l'altère (figure \ref{fig:sigmoide2}) pour obtenir une fonction
associant à l'âge de la cellule considérée une probabilité de
changement d'état. Le facteur 0.02 permet d'adoucir la pente de la
sigmoïde tandis que 350 sert à décaler $f(x)$ de façon à pouvoir
l'utiliser dans le domaine positif.

\begin{figure}[H]
  \centering
  \subcaptionbox{$t = 0$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/ca_0.png}
  }
  \subcaptionbox{$t = 25$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/ca_25.png}
  }

  \subcaptionbox{$t = 50$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/ca_50.png}
  }
  \subcaptionbox{$t = 100$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/ca_100.png}
  }
  \caption{Quatre configurations de l'automate cellulaire. On y
    retrouve peu de similarités.}
  \label{fig:ac}
\end{figure}

\begin{figure}[H]
  \centering
  \subcaptionbox{}[.3\linewidth][c]{
    \raisebox{3cm}{$f(x) = \frac{1}{ 1 + e^{-x}}$}
  }
  \subcaptionbox{}[.6\linewidth][c]{
    \includegraphics[width=.6\linewidth]{images/sigmoid.png}
  }
  \caption{Sigmoïde classique.}
  \label{fig:sigmoide1}
\end{figure}

\begin{figure}[H]
  \centering
  \subcaptionbox{}[.3\linewidth][c]{
    \raisebox{3cm}{$f(t) = \frac{1}{1 + e^{-0.02(t-350)}}$}
  }
  \subcaptionbox{}[.6\linewidth][c]{
    \includegraphics[width=.6\linewidth]{images/sigmoid-age.png}
  }
  \caption{Probabilité de changement d'état en fonction de l'âge de la
    parcelle.}
  \label{fig:sigmoide2}
\end{figure}

On voit sur la figure \ref{fig:ac-stable} un automate cellulaire doté
des mêmes règles de transition et de la même configuration initiale
que lors de notre première tentative mais pour lequel l'âge des
cellules est pris en compte lors de l'évaluation de la probabilité de
transition vers un autre état. En conséquence, l'évolution de la ville
est clairement ralentie, les modifications d'état locales ont le
temps de s'exprimer et la ville virtuelle conserve sa forme.

\begin{figure}[H]
  \centering
  \subcaptionbox{$t = 0$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/sca_0.png}
  }
  \subcaptionbox{$t = 500$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/sca_500.png}
  }
  \subcaptionbox{$t = 1000$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/sca_1000.png}
  }

  \subcaptionbox{$t = 2000$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/sca_2000.png}
  }
  \subcaptionbox{$t = 4000$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/sca_4000.png}
  }
  \subcaptionbox{$t = 6000$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/sca_6000.png}
  }
  \caption{Six configurations de l'automate cellulaire stabilisé.}
  \label{fig:ac-stable}
\end{figure}

Les exemples précédents permettent d'illustrer les règles de
transition et mettent en évidence un problème de stabilité et de
rythme à prendre en compte. Cependant, le but de cet exposé est de se
détacher de la régularité spatiale contraignante des automates
cellulaires et c'est à cet effet que l'on a présenté plus tôt le
diagramme de Voronoï. \`A la manière des automates cellulaires graphes
de O'Sullivan \cite{O'Sullivan2000}, chaque cellule de Voronoï voit
son état varier en fonction de son voisinage; voisinage établi à
partir de la topologie du diagramme; lui-même issu des positions des
centres des parcelles. On applique le même mécanisme cellulaire au
diagramme. La configuration initiale contient autant de parcelles que
l'automate cellulaire classique utilisé précédemment en guise
d'exemple mais leur positionnement est aléatoire (bien que que
homogène). La progression de l'évolution des densités est visible sur
la figure \ref{fig:ac-voronoi} et dévoile un comportement similaire à
celui observé sur l'automate cellulaire classique.

\begin{figure}[H]
  \centering
  \subcaptionbox{$t = 0$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/vca_0.png}
  }
  \subcaptionbox{$t = 500$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/vca_500.png}
  }
  \subcaptionbox{$t = 1000$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/vca_1000.png}
  }

  \subcaptionbox{$t = 2000$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/vca_2000.png}
  }
  \subcaptionbox{$t = 4000$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/vca_4000.png}
  }
  \subcaptionbox{$t = 6000$}[.3\linewidth][c]{
    \includegraphics[width=.3\linewidth]{images/vca_6000.png}
  }
  \caption{Six configurations du diagramme de Voronoï cellulaire.}
  \label{fig:ac-voronoi}
\end{figure}

Plus la simulation avance et plus le système est chargé de parcelles à
haute densité. Un lecteur averti pourrait argumenter que ce
comportement est bien différent de ce que l'on peut constater en
situation réelle : quel que soit le taux de croissance d'une ville,
elle ne finit jamais entièrement remplie de grands immeubles et de
centres commerciaux. Mais il faut garder à l'esprit que le mécanisme
présenté dans cette section ne gère que la croissance verticale. Par
la suite, la croissance horizontale de la ville étendra ses frontières
de façon à ce que les nouvelles parcelles à sa bordure soient moins
denses.

La problématique étant d'étudier la coévolution de deux aspects
urbains, le viaire et le bâti, et non seulement l'évolution des
densités (qui ne sert que de support à l'essor de la ville), on a
préféré choisir une règle basique pour l'automatisme cellulaire. Il
est néanmoins tout à fait possible d'utiliser par la suite des règles
cellulaires plus sophistiquées pour améliorer le réalisme de la
simulation mais aussi considérer d'autres données. On pourrait, par
exemple, prendre en compte les valeurs financières des parcelles ou
les classes sociales des habitants.

\subsubsection{Placement des éléments potentiels}

Le second mécanisme place de nouveaux éléments potentiels en bordure
de la ville et est ainsi responsable de sa croissance horizontale. Ces
éléments sont les routes et les parcelles mais il est seulement
nécessaire de considérer le placement de ces dernières. En effet, les
voies potentielles sont représentées par les arêtes de la cellule de
Voronoï associé à une parcelle.

En quelques mots, le placement se déroule comme suit :

\begin{enumerate}
\item{On détermine les centres de la ville en fonction de la densité;}
\item{On dépose sur un des centres une \textit{graine} mobile qui
  servira de générateur à la nouvelle parcelle;}
\item{La graine se déplace sous l'influence des variables immanentes à
  la ville;}
\item{Quand la graine stoppe son mouvement, on y crée la parcelle.}
\end{enumerate}

Le déplacement de la graine est un processus pouvant potentiellement
prendre en compte de nombreuses variables. Dans la simulation
d'exemple que l'on décrit, seules la densité et le placement des
routes peuvent guider la graine, car ce sont les uniques données
considérées. Cependant, on souhaite que le modèle soit extensible et
qu'il soit capable de supporter d'autres variables et contraintes : la
valeur des sols par exemple, ou bien la pente des zones envisagées ou
l'impossibilité de s'installer sur certains types de terrain. De cette
idée de graine se déplaçant en fonction d'influences diverses
transpire un véritable aspect physique.

On emploie donc une approche mécanique qui se base sur un champ de
vecteurs généré à partir de l'état du sytème urbain pour guider la
graine vers sa destination. Puisque de nombreux paramètres sont à
prendre en compte, on utilise un champ de vecteurs par donnée que l'on
souhaite exprimer puis on les combine; ce qui permet d'en pondérer
différemment l'effet.

On veut évidemment que la densité soit prise en compte dans ce
placement. Dans une ville, les nouvelles installations ont
principalement tendance à se répartir sur les frontières de
l'enveloppe urbaine et à s'éloigner des centres, non pas par animosité
envers l'activité du centre-ville mais simplement par manque
d'espace. Pour traduire ce phénomène d'étalement urbain dans le
modèle, un premier champ $I_d$ fait donc pointer chacun de ses
vecteurs vers la parcelle disposant de la plus faible densité parmi
les voisines de la parcelle sur laquelle il est posé. Ainsi des
chemins de vecteurs se forment et mènent vers les zones à densité
réduite.

Il est aussi naturel que les nouvelles parcelles soient placées près
des installations routières existantes de façon à pouvoir communiquer
aisément avec les grands axes routiers. À cet effet, on ajoute un
champ $I_r$ pour lequel chaque vecteur pointe vers la voie construite
la plus proche. Dans notre modèle, les voies ne sont pas hiérarchisées
et on ne fait pas de distinction entre les routes primaires,
secondaires et tertiaires. Si c'était le cas, on pourrait cependant
imaginer adjoindre à chaque route des coefficients différents selon
leur classe afin que les grands axes attirent le bâti et que les
ruelles aient un impact moindre.

Les nouvelles parcelles ne sont pas uniquement disposées en fonction
de variables internes à la ville car, souvent, l'environnement impose
des restrictions quant à la direction que son expansion va
prendre. Parmi ces contraintes, on pense aux zones non constructibles
comme les plans d'eau, les forêts mais aussi les fortes pentes. Un
champ de vecteurs $I_o$ est dédié à l'évitement de telles zones et
repousse la graine de ces obstacles.

Suivant l'influence de ces quelques champs de vecteurs, la graine se
déplace. Son mouvement n'est pas restreint aux parcelles; elle ne
saute pas de cellule en cellule mais se déplace librement sur l'espace
de la simulation. Elle dispose d'une vitesse variant selon les
parcelles sur lesquelles elle passe. Lorsque cette vitesse devient
nulle, la graine s'arrête et on place la parcelle potentielle.

Deux facteurs modifient la vitesse de déplacement de la graine : la
potentialité et l'aire de la cellule que la graine survole. Les
parcelles construites ont un effet positif et augmentent sa vitesse
tandis que les parcelles potentielles (ou le vide) la réduisent. Ce
choix permet de ralentir la graine lorsqu'elle s'éloigne de
l'enveloppe urbaine et de concentrer les nouvelles parcelles en
bordure de la ville. L'allure de la graine dépend aussi de l'aire de
la parcelle sur laquelle elle est : une petite aire l'augmente et une
grande aire la réduit. Ainsi, les parcelles (construites ou
potentielles) de grande taille ont une plus grande chance d'arrêter la
graine et d'être subdivisée. Le couplage de ces deux effets permet de
reproduire le phénomène de subdivision des grands espaces excentrés
apparaissant dans les villes (de larges parcelles agricoles à la
frontière de la ville sont divisées et converties en habitations).

Un champ de vecteurs est une représentation discrète d'une influence
s'exerçant sur l'environnement de la simulation et ne le recouvre donc
pas entièrement. On procède par interpolation pour évaluer son
influence en un point de l'espace $p$. La première étape consiste à
identifier le carré de vecteurs dans lequel $p$ se trouve. Ensuite,
les directions des vecteurs supérieurs sont interpolés linéairement en
fonction de la position horizontale de $p$; idem pour les vecteurs
inférieurs. Les deux vecteurs produits sont interpolés linéairement en
fonction de la position verticale de $p$. La figure
\ref{fig:bilinear-interp} résume ce procédé nommé
\textit{interpolation bilinéaire}.

\begin{figure}[H]
  \centering
  \subcaptionbox{}[0.3\linewidth][c]{
    \input{images/bilinear-interp-1.tikz}
  }
  \subcaptionbox{}[0.3\linewidth][c]{
    \input{images/bilinear-interp-2.tikz}
  }
  \subcaptionbox{}[0.3\linewidth][c]{
    \input{images/bilinear-interp-3.tikz}
  }
  \caption{Interpolation bilinéaire entre quatre vecteurs.}
  \label{fig:bilinear-interp}
\end{figure}

L'influence générale qu'a le champ de vecteurs final $I$, somme
pondérée de tous les autres, à la position $(x,y)$ est donnée par
l'équation \ref{eq:vf}. Les facteurs $\alpha$, $\beta$ et $\gamma$
sont à définir en fonction de l'importance que l'on souhaite donner à
chaque champ et donc à l'information qu'ils expriment.

\begin{equation}
  I(x,y) = \alpha I_d(x,y) + \beta I_r(x,y) + \gamma I_o(x,y)
  \label{eq:vf}
\end{equation}

Afin d'illustrer ce mécanisme, une ville virtuelle et les champs de
vecteurs associés sont visibles sur la figure \ref{fig:fields}. Le
quart de cercle gris correspond à un obstacle. Les arêtes bleues
forment un axe viaire. La combinaison des trois champs de vecteurs
fournit le champs final de la figure \ref{fig:field-sum}. Les chemins
qui s'y forment guident vers les bords ouest et est de la ville par
attirance de l'axe routier mais aussi dans une moindre mesure vers le
nord et le sud. La croissance vers le sud-est est stoppé par
l'influence de l'obstacle.

On remarque que cette ville ne contient qu'une unique route passant
horizontalement par son centre. En conséquence, la plupart des
parcelles ne sont pas reliées au réseau routier. Cette configuration
jouet n'est donc aucunement réaliste mais permet d'illustrer la
formation des champs de vecteurs.

\begin{figure}[H]
  \centering
  \subcaptionbox{Ville virtuelle.}[.45\linewidth][c]{
    \includegraphics[width=.45\linewidth]{images/vf-base.png}
  }
  \subcaptionbox{$I_d$, le champ d'évasion de la
    densité.}[.45\linewidth][c]{
    \includegraphics[width=.45\linewidth]{images/vf-density.png}
  }

  \subcaptionbox{$I_r$, Le champ d'attraction des routes}[.45\linewidth][c]{
    \includegraphics[width=.45\linewidth]{images/vf-road.png}
  }
  \subcaptionbox{$I_o$, le champ de répulsion des obstacles}[.45\linewidth][c]{
    \includegraphics[width=.45\linewidth]{images/vf-obstacle.png}
  }
  \caption{Une ville virtuelle et les différentes influences s'y manifestant.}
  \label{fig:fields}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/vf-sum.png}
  \caption{Le champ de vecteurs final, généré par la somme pondérée
    des trois champs spécifiques.}
  \label{fig:field-sum}
\end{figure}

Les quelques champs de vecteurs décrits ci-dessus servent un but
illustratif. La généralité de ce mécanisme permet à l'utilisateur du
modèle d'employer les données qu'il juge nécessaires afin de mettre en
avant certaines caractéristiques d'un système urbain. Utiliser ces
trois champs permet de guider la croissance de la ville en fonction
des quantités qui la représentent et de contraintes de
l'environnement. Il serait aussi utile de bénéficier de moyens de
contrôle sur cette évolution urbaine. Dans les villes, des motifs
réguliers se dessinent et sont issus d'un besoin d'organisation de
l'espace. On pense notamment à l'organisation en grille typique de
Manhattan ou à l'organisation radiale de certains quartiers
résidentiels. Afin d'imposer ce type de placement, il serait
envisageable d'employer un nouveau champ de vecteurs guidant vers des
points fixes. Toujours dans une optique de contrôle, on peut utiliser
un champ guidant les nouvelles parcelles vers des zones d'attraction
dont une municipalité souhaiterait évaluer le potentiel.

\subsubsection{Construction des éléments potentiels}

Le mécanisme de placement des éléments présenté précédemment se base
sur les variables internes au système urbain; variables dont
l'évolution est régie par le mécanisme cellulaire. Seulement, les
nouvelles parcelles et routes placées sont potentielles. Le troisième
mécanisme choisit parmi ces éléments potentiels lesquels sont
construits. On traite différemment le choix des parcelles à construire
et le choix des routes à construire.

\paragraph{Choix des parcelles\\}

Afin de contrôler l'expansion effective de la ville, un taux de
croissance $c_p$ est défini pour régler la vitesse de construction des
parcelles potentielles. $c_p$ parcelles sont construites par itération
du modèle.

Toujours dans un souci de cohérence historique, on refuse qu'une
parcelle potentielle soit construite alors qu'elle n'est pas encore
reliée au réseau routier existant. On considère donc uniquement celles
dont la cellule de Voronoï a au moins une arête construite.

Une fois ces parcelles candidates listées, on leur adjoint un score
fonction de l'âge de leur prévision (le temps auquel elles ont été
placées). Le but de cette quantification est de donner la priorité de
construction aux parcelles prévues depuis plus longtemps. La ville
étant néanmoins une structure imparfaite et parfois désordonnée, le
choix des parcelles est fait par un tirage aléatoire biaisé en
fonction de ce score et la priorité par l'âge n'est pas garantie.

\paragraph{Choix des routes\\}

Le taux d'utilisation -- et donc l'importance -- d'une route dépend de
son type, mais aussi de son positionnement au sein de l'espace
urbain. Naturellement, un axe majeur traversant le centre dense de la
ville est plus utile au système global qu'une rue résidentielle
desservant quelques habitations. Comme dans la réalité, lorsque l'on
choisit quelles routes construire, on a toujours comme objectif
d'améliorer ce réseau global et de le préparer à supporter les futures
installations. Le placement des routes dans une ville n'est jamais
fait au hasard et l'ajout de nouvelles routes traduit un besoin
d'étendre le réseau vers l'extérieur ou bien de densifier son centre
dans un but de décongestion.

Puisque l'on souhaite conserver un réseau viaire aussi connexe que
possible, les seules routes candidates à la construction sont les
routes potentielles directement raccordées à une route construite. Ce
sont donc celles qui sont à la frontière entre le domaine du potentiel
et le domaine du construit (voir figure \ref{fig:network}).

L'évaluation des arêtes dont la construction serait bénéfique au
réseau global s'apparente à un problème de flot maximum. Le flot en
question correspond alors au trafic induit par les parcelles et sa
quantité dépend de leur densité. On axe le trafic autour des centres
de la ville et pour chaque centre de densité, on détermine un
carrefour qui fait office de source pour le flot. Tous les autres
carrefours du réseau sont des puits qui recevront une quantité de flot
proportionnelle aux densités des parcelles les entourant. Plus
précisément, si $D(n)$ est la demande d'un carrefour $n$, et la
fonction $C(k)$ fournit le nombre de parcelles de densité $k$
entourant $n$ alors :

\begin{equation}
  D(n) = \delta C(f) + \epsilon C(m) + \eta C(e)
\end{equation}

Les coefficients $\delta$, $\epsilon$ et $\eta$ permettent de
quantifier l'impact de chaque type de densité dans le processus de
construction des routes. Ils sont réglables mais on choisit
généralement $\delta < \epsilon < \eta$. Afin d'équilibrer ce système,
la somme des flots fournis par les sources doit être égale à la somme
des demandes des puits.

Il est important de préciser que même les carrefours potentiels
éloignés du réseau construit font office de puits. Ainsi, le flot de
matière représentant le trafic peut passer par le domaine potentiel et
les sous-réseaux routiers placés par différentes parcelles
potentielles communiquent indirectement.

\begin{figure}[H]
  \centering
  \input{images/network.tikz}
  \caption{Un carrefour par centre de densité sert de source (n\oe ud
    noir) et les autres n\oe uds sont des puits (n\oe uds blancs). Les
    routes adjacentes au réseau viaire construit sont candidates
    (pointillés bleus). Les autres routes potentielles (en pointillés
    gris) ne sont pas encore constructibles mais peuvent porter le
    flot.}
  \label{fig:network}
\end{figure}

On utilise l'algorithme du \textit{network simplex} fourni par la
bibliothèque GraphStream pour résoudre ce problème de flot maximum. Au
final, les arête candidates par lesquelles passe le plus de flot sont
celles qui bénéficieront le plus au système. On choisit donc de
construire les $C_r$ meilleures, où $C_r$ est le taux de croissance du
réseau routier.

Comme la démonstration qui suit en témoigne, cette méthode a le défaut
principal de \textit{surdensifier} le réseau routier en son centre. En
effet, les carrefours des zones hautement peuplées subissent
énormément de trafic et y construire de nouvelles voies est souvent
bénéfique au système global. En conséquence, les parcelles qui s'y
trouvent sont majoritairement encerclées de routes construites alros
que dans une vraie ville, les parcelles sont groupées en bandes ou en
blocs. Ce phénomène est dû à l'approche trop généreuse que prend ce
mécanisme : tant qu'une route peut être construite et améliore
l'accessibilité générale, on la construit. Il serait préférable
d'ajouter à l'avenir un critère d'économie qui élimine de la liste des
candidates les routes par lesquelles passent un flot trop faible
quitte à ignorer le taux de croissance.

\section{Mesures}

\subsection{Démonstration}

Afin d'évaluer notre modèle, on l'applique à une configuration issue
du réel. La zone géographique étudiée est la partie ouest de la ville
du Havre. Les données utilisées \footnote{Les données employées
  proviennent de l'Agence Européenne pour l'Environnement
  \url{http://www.eea.europa.eu/data-and-maps/data/urban-atlas}} ont
été réduites à un sous-espace de la ville pour des raisons de temps de
calcul. Elles comprennent les informations cadastrales, les densités
de population et le tracé du réseau routier. La figure
\ref{fig:le_havre} dévoile plusieurs représentations de cette zone
géographique.

\begin{figure}[H]
  \centering
  \subcaptionbox{Vue aérienne.}[.32\linewidth][c]{
    \includegraphics[width=.32\linewidth]{images/le_havre_map.png}
  }
  \subcaptionbox{Shapefile.}[.32\linewidth][c]{
    \includegraphics[width=.32\linewidth]{images/le_havre_shapefile.png}
  }
  \subcaptionbox{Voronoï.\label{fig:le_havre_voronoi}}[.32\linewidth][c]{
    \includegraphics[width=.32\linewidth]{images/le_havre_voronoi.png}
  }
  \caption{}
  \label{fig:le_havre}
\end{figure}

La prétention de cette tentative n'est pas d'émuler le développement
complet du Havre à partir d'un de ses sous-ensembles mais plutôt de
partir d'une configuration existante et obéissant donc à des règles
urbaines précises puis d'observer le comportement de la
simulation. Chaque ville est unique et évolue dans un cadre
différent. Dans notre représentation du Havre, la contrainte la plus
apparente provient du profil côtier qui interdit tout développement de
la ville dans cette direction (zone grisée sur la figure
\ref{fig:le_havre}\subref{fig:le_havre_voronoi}). Cette limitation
nous permet de mettre en application notre évitement des obstacles via
un champ de vecteurs approprié.

Quelques itérations de cette simulation sont commentées ci-dessous.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/lh_0.png}
  \caption{$t = 0$, La configuration initiale comprend un unique
    centre dense. En toute logique, il devrait s'être élargi à la fin
    de la simulation. D'autres centres vont éventuellement apparaître,
    notamment au sud où quelques parcelles à haute densité pourraient
    se regrouper. On prévoit aussi une expansion du territoire urbain
    vers le nord, le nord-est et l'est et une stagnation des cotés
    ouest, sud-ouest et sud à cause de la barrière maritime.}
  \label{fig:lh_0}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/lh_125.png}
  \caption{$t = 125$. Le centre historique se densifie. Un nouveau
    centre commence à se former au sud. Une légère croissance vers le
    nord et l'est est remarquée.}
    \label{fig:lh_125}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/lh_250.png}
  \caption{$t = 250$. Un nouveau centre commence à se former au
    nord. Le centre du sud se renforce. L'expansion vers les terres
    continue. On remarque un bloc de parcelles potentielles à l'est.}
    \label{fig:lh_250}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/lh_375.png}
  \caption{$t = 375$. Le centre du sud s'affaiblit à cause des
    nombreuses parcelles à densités faibles l'entourant. Au
    contraire, celui au nord se renforce.}
    \label{fig:lh_375}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/lh_500.png}
  \caption{$t = 500$. Forte croissance au nord. Le centre historique
    de la ville s'étend vers l'ouest. Le centre de densité au sud
    reste instable et semble se déplacer.}
    \label{fig:lh_500}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/lh_500_comparison.png}
  \caption{À titre de comparaison, l'état de la ville à $t = 500$ sous
    le contour de la ville (pointillés épais) et le contour du centre
    historique (pointillés fins) à $t = 0$.}
    \label{fig:lh_comp}
\end{figure}

\subsection{Mesures}

L'obtention de données urbaines a été un problème récurrent durant la
réalisation de ce projet. Les données les plus précises sont sujettes
à des processus administratifs d'autorisation de consultation et les
quelques données libres disponibles sont souvent partielles ou
incomplètes. De même, il n'a pas été possible d'acquérir des données
historiques. Ce manque d'information nous empêche d'effectuer des
mesures comparatives entre l'évolution réelle d'une ville et celle
simulée par ce modèle. On peut néanmoins effectuer quelques mesures
sur la ville générée pour étudier l'évolution du bâti et du viaire.

Commençons par observer l'évolution de la surface de la ville. Pour la
calculer, on additionne les surfaces des cellules de chaque parcelle
construite. Une fois de plus, la cellule de Voronoï ne représente pas
la véritable empreinte cadastrale d'une parcelle; l'aire que l'on
calcule est donc une approximation généreuse. Cette simplification est
négligeable au sein des centres de densité puisque les parcelles y
sont usuellement collées, par souci d'économie d'espace. Par contre,
les cellules sont plus larges vers l'extérieur de la ville et on ne
dispose d'aucune garantie que l'aire des cellules y soit
représentative de l'aire des véritables parcelles.

On peut voir sur la figure \ref{fig:area} que l'augmentation de la
superficie est globalement constante. Les creux dans la courbe sont
explicables par le phénomène de subdivision des cellules construites :
lorsque la graine portant une parcelle potentielle s'arrête avant
d'avoir pu sortir de l'enveloppe de la ville, elle subdivise une
parcelle construite et remplace une partie de son aire par une
nouvelle parcelle potentielle ce qui a pour effet de diminuer la
surface construite totale.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/area.png}
  \caption{Évolution de la superficie de la ville en fonction du temps.}
  \label{fig:area}
\end{figure}

On affine cette mesure pour analyser séparément l'évolution des aires
de chaque type de densité (figure \ref{fig:area_density}). La courbe
de l'aire des parcelle de densité faible se démarque des autres de par
sa hauteur et sa croissance. La différence est notable dés la première
itération mais dépend seulement de la configuration de départ sur
laquelle on n'a pas de contrôle. Par contre, sa croissance est plus
forte car l'ajout de parcelles de densité faible dépend à la fois du
mécanisme cellulaire et de la croissance horizontale alors que les
parcelles de densité moyenne et élevée ne peuvent compter que sur le
mécanisme cellulaire pour se multiplier. Une légère augmentation de
leur aire est tout de même perceptible. Ce faible écart entre la
configuration initiale finale et la configuration finale est dû aux
coefficients de la matrice d'affinités qui favorisent le regroupement
et la stabilité au détriment de l'expansion. Selon la dynamique que
l'on souhaite donner à la ville virtuelle, il est possible de les
modifier.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/area_ALL.png}
  \caption{Évolution de la densité de la ville en fonction du temps et
  par densité.}
  \label{fig:area_density}
\end{figure}

Pour mesurer l'efficacité du réseau de transport, on calcule le
diamètre du graphe le représentant. Le diamètre est la longueur du
plus des plus courts chemins entre toutes les paires de n\oe uds et
exprime l'accessibilité que fournit le réseau. On remarque sur la
figure \ref{fig:diameter} une croissance régulière entrecoupée de
descentes brusques. Cette alternance met en évidence la présence de
deux phases naturelles de la construction du réseau. L'augmentation
est évidemment dûe à l'expansion constante du réseau routier : puisque
la ville grandit, les n\oe uds extrêmes s'éloignent. Les descentes
sont quant à elle le résultat de sa densification qui améliore
l'accessibilité en décongestionnant les parties fortement peuplées du
réseau. Les paliers par lesquels la courbe passe sont dûs à l'aspect
opportuniste de ce modèle : pendant plusieurs itérations le diamètre
moyen stagne quand seules des routes potentielles peu bénéfiques sont
disponibles mais il suffit que de nouvelles parcelles potentielles
soient placées en bordure de ville pour que le réseau routier s'y
installe et donc que le diamètre augmente drastiquement.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/diameter.png}
  \caption{Évolution du diamètre du réseau routier en fonction du temps.}
  \label{fig:diameter}
\end{figure}

%% Le calcul de la centralité intermédiaire moyenne du réseau permet
%% aussi d'évaluer son accessibilité. La centralité intermédiaire d'un
%% n\oe ud correspond au nombre de plus courts chemins y passant. BIEN /
%% PAS BIEN. ANALYSE. COMP DIAMETRE.

%% \begin{figure}[H]
%%   \centering
%%   \includegraphics[width=.8\linewidth]{images/centrality.png}
%%   \caption{Évolution de la centralité moyenne du réseau routier en
%%     fonction du temps.}
%%   \label{fig:centrality}
%% \end{figure}

Toujours pour évaluer le réseau viaire, on calcule le degré moyen des
n\oe uds du graphe. On ne prend pas en compte les n\oe uds de degré 2
car ils ne représentent pas un véritable carrefour. La valeur du degré
moyen est très faible à $t = 0$ (figure \ref{fig:degree}) à cause d'un
défaut d'implémentation. Le fichier de données géographiques contenant
seulement des informations vectorielles, une approximation est
utilisée pour retranscrire le tracé routier sur le diagramme de
Voronoï. À cause de cette importation imparfaite, certaines routes
sont oubliées et le réseau contient de nombreuses composantes
non-connexes. Au fur et à mesure de la progression de la simulation,
le degré moyen augmente car la connexité est rétablie par la phase de
densification. La stabilisation du degré moyen à partir de $t = 300$
est l'information principale fournie par cette courbe. Cette
stabilisation est caractéristique des systèmes urbains
\cite{Strano2012}. Le degré moyen du réseau routier d'une ville reste
globalement constant et lui sert de signature. San Francisco a par
exemple un degré moyen de 2.54 tandis celui de Shangai vaut 3.29
\cite{Leung2011}.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/degree.png}
  \caption{Évolution du degré moyen des n\oe uds du réseau viaire.}
    \label{fig:degree}
\end{figure}

Finalement, on mesure le degré moyen des n\oe uds en fonction de la
distance à laquelle ils se trouvent du centre de densité (voir figure
\ref{fig:degree_distance}). La diminution du degré moyen est
inversement proportionnelle à l'éloignement des centres. C'est une
particularité intrinsèque des réseaux urbains : les centres sont très
denses et plus on s'éloigne, moins le réseau est serré.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\linewidth]{images/degree_distance.png}
  \caption{Degré des n\oe uds du réseau viaire en fonction de leur
    distance par rapport au centre de densité.}
  \label{fig:degree_distance}
\end{figure}

\section{Conclusion}

Le but de ce projet était de proposer un modèle de croissance urbaine
simulant à la fois l'évolution du réseau routier et de la topologie de
la ville. Une garantie supplémentaire concernant la cohérence
historique a été formulée.

L'utilisation d'un automate cellulaire relaxé, prenant la forme d'un
diagramme de Voronoï, a permis de traduire l'irrégularité du système
que forme la ville tout en perpétuant un concept simple axé autour du
changement d'état et de la relation de voisinage.

La morphogenèse de la ville est guidée par un ensemble de champs de
vecteurs exprimant des qualités du système (ici, la densité et le
placement des routes) et des contraintes (les obstacles). Cette
méthode générale est extensible et peut modéliser de nombreux autres
facteurs.

La dualité entre éléments potentiels et éléments construits, ainsi que
les rapports d'ordre qu'ils entretiennent ont permis d'imiter le cycle
d'urbanisation réel et d'assurer la cohérence historique.

Les mesures effectuées sur quelques simulations ont mis en évidence
des similarités entre les configurations obtenues et de véritables
systèmes urbains. Notamment le fait que notre modèle alterne phase
d'expansion et phase de densification, la stabilisation du degré moyen
des carrefours et l'amenuisement du réseau routier allant de paire
avec la réduction des densités.

Ce modèle souffre néanmoins de plusieurs lacunes. Premièrement, il
serait avantageux d'employer un mécanisme cellulaire plus sophistiqué
que celui présenté en exemple qui, bien qu'illustrant les idées
sous-jacentes au modèle, reste très basique. De la même façon, revoir
les coefficients de la matrice d'affinités donnerait des résultats
plus convaincants. Ces quelques nécessités font néanmoins partie du
domaines des réglages et il est plus intéressant de se pencher sur les
défauts conceptuels du modèle.

La cellule de Voronoï représente un espace d'influence et ni la forme
ni l'aire de la parcelle représentée ne sont connues. Il serait
bénéficiable, toujours dans une optique d'amélioration du réalisme,
d'employer des générateurs prenant la formes des empreintes
cadastrales plutôt que de simples points en leur centre. Représenter
une ville existante avec cette représentation révisée est tout à fait
envisageable mais qu'en est-il de la génération des empreintes des
nouvelles parcelles ? Plusieurs travaux récents proposent des méthodes
de création de façades de bâtiments à l'aide de L-Systems desquelles
nous pourrions nous inspirer \cite{Parish2001}.

Le défaut principal du modèle est lié au développement du réseau
viaire. Avec l'avancement du temps, le réseau se densifie autour des
zones de fortes densités jusqu'à ce que toutes les parcelles qui s'y
trouvent soient encerclées de routes. Cette densification extrême va à
l'encontre du réalisme. Une solution basée sur l'ajout d'une
contrainte d'économie a été mentionnée pour réduire ce phénomène. Mais
représenter les véritables empreintes cadastrales des parcelles
permettra aussi de l'éviter. En effet, il sera ainsi plus aisé de
regrouper les parcelles en contact direct ou dont l'espace de
séparation ne permet pas d'accueillir une route. De véritables blocs
de parcelles apparaîtront et les \textit{patterns} caractéristiques du
tissu urbain se dessineront.

\printbibliography

\end{document}
